{% extends "index.html" %}
{% block left_menu %}
<p>
  <form class="filter" action="/a/o/add/" method="get">
    <input type="submit" name="" value="Новая заявка">
  </form>
</p>

<form class="filter" action="" method="post" >
  {% csrf_token %}
  <fieldset>
  <legend>Фильтры</legend>
  <select class="select1" name="type">
    <option value="0">Типы анализа(Все)</option>
    {% for elem in types %}
    {% if elem.pk == typeselected %}
      <option value="{{elem.pk}}" selected>{{elem}}</option>
    {% else %}
      <option value="{{elem.pk}}">{{elem}}</option>
    {% endif %}
    {% endfor %}
  </select>
  <br />
  <select class="select1" name="project">
    <option value="0">Проекты(Все)</option>
    {% for elem in projects %}
    {% if elem.pk == projectselected %}
      <option value="{{elem.pk}}" selected>{{elem}}</option>
    {% else %}
      <option value="{{elem.pk}}">{{elem}}</option>
    {% endif %}
    {% endfor %}
  </select>
  <br />
  <select class="select1" name="customer">
    <option value="0">Заказчики(Все)</option>
    {% for elem in customers %}
    {% if elem.pk == customerselected %}
      <option value="{{elem.pk}}" selected>{{elem}}</option>
    {% else %}
      <option value="{{elem.pk}}">{{elem}}</option>
    {% endif %}
    {% endfor %}
  </select>
  <br />
  <label class="form_group">
    <input  type="checkbox" name="executed" value="on" hidden> <br/>
    </label>
  <br />
  <input class="mbutton" type="submit" name="but1" value="Отобрать">
  <input class="mbutton" type="submit" name="but2" value="Отключить отбор">
</fieldset>
</form>
{% endblock %}

{% block content %}


<h4>Таблица заказов</h4>
    <table class="table">
      <tr >
        <td>Дата</td>
        <td>Код/Код образца</td>
        <td>Тип </td>
        <td>Заказчик</td>
        <td>Проект</td>
        <td>Комментарий</td>
        <td> Выполнен/Нет </td>
        <td>Просмотр</td>
      </tr>
    {% for order in orders %}
    {% if order.executed %}
    <tr class="gree">
    {% else %}
    <tr>
    {% endif %}
      <td>{{order.dateTime}}</td>
      <td>{{order.code}} <br/> {{order.codeOfSample}}</td>
      <td> {{order.type}} </td>
      <td>{{order.customer}}</td>
      <td>{{order.project}}</td>
      <td>{{order.comment}}</td>
      <td>
        {% if order.executed %}
        <a href="#">
          <span class="glyphicon glyphicon-ok-circle"></span>
        </a>
        {% else %}
        <a href="/a/a/add/{{order.code}}">
          <span class="glyphicon glyphicon-plus"></span>
        </a>
        {% endif %}
      </td>
      <td>
        <a href={% url "order" %}{{order.pk}}>
          <span class="glyphicon glyphicon-search"></span>
        </a>
      </td>
    </tr>
    {% endfor %}
    </table>
    {% if orders.paginator.num_pages > 1 %}

    <div id="pagination">
      {% if orders.has_previous %}
        <div id="previous-page">
          <a href={% url "orders"%}{{ orders.previous_page_number }} >
          &lt</a>
        </div>
      {% endif %}
    {% if orders.has_next %}
      <div id="next-page">
        <a href={% url "orders" %}{{orders.next_page_number}}>&gt</a>
      </div>
    {% endif %}
    </div>
    <div id="num-pages">
    {% for pn in orders.paginator.page_range  %}
      {% if not forloop.first %}
        &nbsp;&nbsp;|&nbsp;&nbsp;
      {% endif %}
      {% if orders.number != pn %}
        <a href={% url "orders" %}{{pn}}>
      {% endif %}
      {{pn}}
      {% if orders.number != pn %}
        </a>
      {% endif %}
    {% endfor %}

        </div>
    {% endif %}
{% endblock %}
